<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta name="theme-color" content="#0a0a0a" />
    <link rel="manifest" href="/manifest.webmanifest">
    <title>EmojiFusion â€” Ayotype</title>

    <!-- Google Analytics (gtag.js) with Consent Mode -->
    <script>
      // Initialize gtag consent mode (default: denied)
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('consent', 'default', {
        'analytics_storage': 'denied',
        'ad_storage': 'denied',
        'ad_user_data': 'denied',
        'ad_personalization': 'denied'
      });
      gtag('js', new Date());
      gtag('config', 'G-RWETGB9C39');

      // Update consent based on user preference
      (function() {
        try {
          const consent = localStorage.getItem('ayotype_ad_consent');
          if (consent) {
            const prefs = JSON.parse(consent);
            if (prefs.analytics) {
              gtag('consent', 'update', {
                'analytics_storage': 'granted'
              });
            }
            if (prefs.advertising) {
              gtag('consent', 'update', {
                'ad_storage': 'granted',
                'ad_user_data': 'granted',
                'ad_personalization': 'granted'
              });
            }
          }
        } catch (e) {}
      })();
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RWETGB9C39"></script>

    <style>
      /* Minimal font stack without external fetch */
      :root{--bg:#0a0a0a;--card:#121212;--fg:#f7f7f5;--muted:#b6b6b1;--accent1:#FF79C6;--accent2:#FFD94E;}
      html,body,#root{height:100%}
      body{margin:0;background:radial-gradient(1200px 800px at 20% -10%, #171717, #0a0a0a);}
    </style>
  </head>
  <body>
    <div id="root"></div>
    <!-- Service worker disabled for local development -->
    <!-- <script type="module">
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(()=>{});
      }
    </script> -->
    <link rel="stylesheet" href="./src/app.css">
    <link rel="preload" href="./src/emoji-meta.json" as="fetch" crossorigin="anonymous">
    <script type="module" src="./src/main.tsx"></script>
  </body>
</html>